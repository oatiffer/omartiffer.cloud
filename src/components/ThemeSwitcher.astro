---
import DarkIcon from "../assets/icons/darktheme.svg";
import LightIcon from "../assets/icons/lighttheme.svg";
---

<div class="sm:flex sm:gap-4">
  <button
    id="button-dark"
    type="button"
    class="font-medium text-base-content cursor-pointer hidden"
    data-theme="dark"
  >
    <span
      class="group inline-flex shrink-0 justify-center items-center size-9 stroke-secondary hover:stroke-info"
    >
      <DarkIcon />
    </span>
  </button>
  <button
    id="button-light"
    type="button"
    class="font-medium text-base-content cursor-pointer"
    data-theme="light"
  >
    <span
      class="group inline-flex shrink-0 justify-center items-center size-9 stroke-warning hover:stroke-yellow-300"
    >
      <LightIcon />
    </span>
  </button>
</div>

<script>
  // Add event listeners to the buttons
  const themeSwitcher = document.querySelectorAll("[data-theme]");

  themeSwitcher.forEach((button) => {
    button.addEventListener("click", () => {
      const selectedTheme: string = button.getAttribute("data-theme") ?? "";

      setTheme(selectedTheme);
      localStorage.setItem("theme", selectedTheme);
    });
  });

  function setTheme(theme: string) {
    // Set the initial visibility of the buttons
    const darkButton = document.getElementById("button-dark");
    const lightButton = document.getElementById("button-light");

    switch (theme) {
      case "dark":
        if (!document.documentElement.classList.contains("dark")) {
          document.documentElement.classList.add("dark");
        }
        document.documentElement.classList.remove("light");
        darkButton?.classList.add("hidden");
        lightButton?.classList.remove("hidden");
        break;
      case "light":
        if (!document.documentElement.classList.contains("light")) {
          document.documentElement.classList.add("light");
        }
        document.documentElement.classList.remove("dark");
        darkButton?.classList.remove("hidden");
        lightButton?.classList.add("hidden");
        break;
    }
  }
</script>
